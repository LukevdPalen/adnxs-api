{"version":3,"sources":["appnxs-lib-dist.js"],"names":[],"mappings":"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","file":"appnxs-lib-dist.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('limiter'), require('bluebird'), require('request'), require('lodash')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'limiter', 'bluebird', 'request', 'lodash'], factory) :\n  factory((global.null = {}), global._limiter, global.bluebird, global.request, global.lodash)\n}(this, function (exports, _limiter, bluebird, request, lodash) { 'use strict';\n\n  request = ('default' in request ? request['default'] : request);\n\n  /*jslint maxlen: 500 */\n  /**\n   * Created by Luke on 01/05/15.\n   */\n\n  const endpoints = {\n\n    /**\n     * source: https://wiki.appnexus.com/display/api/API+Services\n     */\n\n    ACCOUNT_RECOVERY_SERVICE: '/account-recovery',\n    AD_PROFILE_SERVICE: '/ad-profile',\n    AD_QUALITY_RULE_SERVICE: '/ad-quality-rule',\n    AD_SERVER_SERVICE: '/ad-server',\n    ADVERTISER_SERVICE: '/advertiser',\n    APP_INSTALLATION_SERVICE: '/app-installation',\n    AUTHENTICATION_SERVICE: '/auth',\n    BATCH_SEGMENT_SERVICE: '/batch-segment',\n    BRAND_COMPANY_SERVICE: '/brand-company',\n    BRAND_SERVICE: '/brand',\n    BROKER_SERVICE: '/broker',\n    BROWSER_SERVICE: '/browser',\n    CAMPAIGN_SERVICE: '/campaign',\n    CARRIER_SERVICE: '/carrier',\n    CATEGORY_SERVICE: '/category',\n    CITY_SERVICE: '/city',\n    CLICK_TRACKER_SERVICE: '/clicktracker',\n    CONTENT_CATEGORY_SERVICE: '/content-category',\n    COUNTRY_SERVICE: '/country',\n    CREATIVE_CUSTOM_REQUEST_TEMPLATE_SERVICE: '/creative-custom-request-template',\n    CREATIVE_CUSTOM_REQUEST_TEMPLATE_TYPE_SERVICE: '/creative-custom-request-template-type',\n    CREATIVE_FOLDER_SERVICE: '/creative-folder',\n    CREATIVE_FORMAT_SERVICE: '/creative-format',\n    CREATIVE_MACRO_CHECK_SERVICE: '/creative-macro-check',\n    CREATIVE_SEARCH_SERVICE: '/creative-search',\n    CREATIVE_SERVICE: '/creative',\n    CREATIVE_TEMPLATE_SERVICE: '/template',\n    CURRENCY_SERVICE: '/currency',\n    DEAL_BUYER_ACCESS_SERVICE: '/package-buyer-access',\n    DEAL_FROM_PACKAGE_SERVICE: '/deal-from-package',\n    DEAL_SERVICE: '/deal',\n    DEMOGRAPHIC_AREA_SERVICE: '/dma',\n    DEVELOPER_SERVICE: '/developer',\n    DEVICE_MAKE_SERVICE: '/device-make',\n    DEVICE_MODEL_SERVICE: '/device-model',\n    DOMAIN_AUDIT_STATUS_SERVICE: '/url-audit-search',\n    DOMAIN_LIST_SERVICE: '/domain-list',\n    EXTERNAL_INVENTORY_CODE_SERVICE: '/external-inv-code',\n    EXTRACT_CLICKTAGS_SERVICE: '/extract-click-tags',\n    FEED_STATUS_SERVICE: '/feed-status',\n    IMPRESSION_TRACKER_SERVICE: '/imptracker',\n    INSERTION_ORDER_SERVICE: '/insertion-order',\n    INVENTORY_ATTRIBUTE_SERVICE: '/inventory-attribute',\n    INVENTORY_GROUP_SERVICE: '/inventory-group',\n    INVENTORY_RESOLD_SERVICE: '/inventory-resold',\n    INVENTORY_SOURCE_SERVICE: '/inventory-source',\n    IP_RANGE_LIST_SERVICE: '/ip-range-list',\n    LABEL_SERVICE: '/label',\n    LANGUAGE_SERVICE: '/language',\n    LINE_ITEM_SERVICE: '/line-item',\n    LOG_LEVEL_DATA_SERVICE: '/siphon',\n    LOOKUP_SERVICE: '/lookup',\n    MANUAL_OFFER_RANKING_SERVICE: '/manual-offer-ranking',\n    MEDIA_SUBTYPE_SERVICE: '/media-subtype',\n    MEDIA_TYPE_SERVICE: '/media-type',\n    MEMBER_PROFILE_SERVICE: '/member-profile',\n    MEMBER_SERVICE: '/member',\n    MOBILE_APP_INSTANCE_LIST_SERVICE: '/mobile-app-instance-list',\n    MOBILE_APP_INSTANCE_SERVICE: '/mobile-app-instance',\n    MOBILE_APP_SERVICE: '/mobile-app',\n    MOBILE_APP_STORE_SERVICE: '/mobile-app-store',\n    OBJECT_LIMIT_SERVICE: '/object-limit',\n    OPERATING_SYSTEM_EXTENDED_SERVICE: '/operating-system-extended',\n    OPERATING_SYSTEM_FAMILY_SERVICE: '/operating-system-family',\n    OPERATING_SYSTEM_SERVICE: '/operating-system',\n    OPTIMIZATION_ZONE_SERVICE: '/optimization-zone',\n    PACKAGE_BUYER_ACCESS_SERVICE: '/package-buyer-access',\n    PACKAGE_SERVICE: '/package',\n    PAYMENT_RULE_SERVICE: '/payment-rule',\n    PIXEL_SERVICE: '/pixel',\n    PIXEL_TEMPLATE_SERVICE: '/pixel-template',\n    PLACEMENT_SERVICE: '/placement',\n    PLATFORM_MEMBER_SERVICE: '/platform-member',\n    PLUGIN_INSTANCE_SERVICE: '/plugin-instance',\n    PLUGIN_SERVICE: '/plugin',\n    PROFILE_SERVICE: '/profile',\n    PROFILE_SUMMARY_SERVICE: '/profile-summary',\n    PUBLISHER_SERVICE: '/publisher',\n    REGION_SERVICE: '/region',\n    REPORT_SERVICE: '/report',\n    REPORT_STATUS_SERVICE: '/report-status',\n    SAVED_REPORT_SERVICE: '/saved-report',\n    SEARCH_SERVICE: '/search',\n    SEGMENT_SERVICE: '/segment',\n    SIPHON_CONFIG_SERVICE: '/siphon-config',\n    SITE_SERVICE: '/site',\n    TAG_PARSER_SERVICE: '/tag-parser-job',\n    TECHNICAL_ATTRIBUTE_SERVICE: '/technical-attribute',\n    THIRD_PARTY_PAGE_ACCESS_SERVICE: '/thirdparty-pageaccess',\n    THIRD_PARTY_PIXEL_SERVICE: '/thirdparty-pixel',\n    TOWN_SERVICE: '/town',\n    USER_GROUP_PATTERN_SERVICE: '/usergroup-pattern',\n    USER_SERVICE: '/user',\n    USER_VERIFICATION_SERVICE: '/user-verification',\n    VISIBILITY_PROFILE_SERVICE: '/visibility-profile'\n\n  };\n\n  var Endpoints = endpoints;\n\n  exports.endpoints = Endpoints;\n\n  /*jshint camelcase: false */\n\n  /**\n   * Created by LukevdPalen on 01/05/15.\n   */\n  function responseContainsError(body) {\n    'use strict';\n\n    return lodash.isObject(body) &&\n        body.response &&\n          (!body.response.status ||\n            (body.response.status &&\n            body.response.status !== 'OK'));\n  }\n\n  function wrapError(error) {\n    'use strict';\n\n    error.message = `${error.statusCode} - ${error.response.error ||\n                                           error.response.statusMessage}`;\n    return error;\n  }\n\n  function ErrorResponse(body) {\n    'use strict';\n\n    var error = wrapError(body);\n    return error;\n  }\n\n  function clientError(response) {\n    'use strict';\n\n    return response.statusCode >= 400 &&  response.statusCode < 500;\n  }\n\n  class RequestError extends Error {\n\n    constructor(cause) {\n      super();\n      this.name = 'RequestError';\n      this.message = String(cause);\n      this.cause = cause;\n\n    }\n  }\n\n  class StatusCodeError extends Error {\n\n    constructor(statusCode, message) {\n      super();\n      this.name = 'StatusCodeError';\n      this.statusCode = statusCode;\n      this.message = statusCode + ' - ' + message;\n\n    }\n  }\n\n  /**\n   * Created by Luke on 01/05/15.\n   */\n  class Transport {\n    /**\n     * Transport constructor.\n     * @constructs Transport\n     * @params {object} [options={}] - transport options\n     */\n    constructor(options = { apiBase: '/'}) {\n\n      /**\n       * Transport options\n       * @member Client#options\n       */\n      this.options = options;\n    }\n\n    /**\n     * Preform a GET request\n     *\n     * @method get\n     * @see {@link uri} for possible endpoints.\n     * @params {string} endpoint - api endpoint\n     * @params {object} [args={}] - arguments\n     * @returns {Promise<Object, Error>} Response body\n     **/\n    get(endpoint, args = {}) {\n      return this.request('GET', endpoint, args);\n    }\n\n    /**\n     * Preform a PUT update request\n     *\n     * @method put\n     * @see {@link uri} for possible endpoints.\n     * @params {string} endpoint - api endpoint\n     * @params {object} [args={}] - arguments\n     * @returns {Promise<Object, Error>} Response body\n     **/\n    put(endpoint, args = {}) {\n      return this.request('PUT', endpoint, args);\n    }\n\n    /**\n     * Preform a POST request\n     *\n     * @method post\n     * @see {@link uri} for possible endpoints.\n     * @params {string} endpoint - api endpoint\n     * @params {object} [args={}] - arguments\n     * @returns {Promise<Object, Error>} Response body\n     **/\n    post(endpoint, args = {}) {\n      return this.request('POST', endpoint, args);\n    }\n\n    /**\n     * Preform a DELETE request\n     *\n     * @method delete\n     * @see {@link uri} for possible endpoints.\n     * @params {string} endpoint - api endpoint\n     * @params {object} [args={}] - arguments\n     * @returns {Promise<Object, Error>} Response body\n     **/\n    delete(endpoint, args = {}) {\n      return this.request('DELETE', endpoint, args);\n    }\n\n    requestPromise(options) {\n      return new bluebird.Promise((resolve, reject) => {\n\n        request(options, (err, response, body) => {\n          if (err) {\n            reject(new RequestError(err));\n\n          } else if (clientError(response)) {\n            let msg = (body.response && body.response.error) ?\n                body.response.error : response.statusMessage;\n\n            reject(new StatusCodeError(response.statusCode, msg));\n\n          } else if (responseContainsError(body)) {\n            let msg = (body.response && body.response.error) ?\n                body.response.error : response.statusMessage;\n\n            reject(new RequestError(Error(msg)));\n\n          } else if (response.statusCode >= 500) {\n            reject(new StatusCodeError(response.statusCode,\n                                       response.statusMessage));\n\n          } else {\n            resolve([body, response]);\n          }\n\n        });\n      });\n    }\n\n    /**\n     * Preform a the actual request\n     *\n     * @method request\n     * @private\n     * @see {@link uri} for possible endpoints.\n     * @params {string} method - Request method\n     * @params {string} endpoint - api endpoint\n     * @params {object} [args={}] - arguments\n     * @returns {Promise<Object, Error>} Response body\n     **/\n    request(method, endpoint, args) {\n\n      var payload = {\n        method,\n        uri: this.options.apiBase + endpoint\n      };\n\n      if (this.options.proxy) {\n        payload.proxy = this.options.proxy;\n      }\n\n      if (method === 'GET') {\n        payload.json = true;\n        payload.qs = args;\n      } else {\n        payload.json = args;\n      }\n\n      if (this.options.token && this.options.token.value) {\n        payload.headers = {\n          Authorization: this.options.token.value\n        };\n      }\n\n      return this.requestPromise(payload)\n          .then(([body]) => {\n            return body.response;\n          });\n    }\n  }\n\n  var _Transport = Transport;\n\n  exports.Transport = _Transport;\n\n  /**\n   * Created by Luke on 01/05/15.\n   */\n  const MAX_AUTH_PERIOD = 300000;\n\n  /** @constant {number} */\n  const MAX_READ_PERIOD = 60000;\n\n  /** @constant {number} */\n  const MAX_WRITE_PERIOD = 60000;\n\n  /** @constant {number} */\n  const MAX_READ_PER_PERIOD = 100;\n\n  /** @constant {number} */\n  const MAX_WRITE_PER_PERIOD = 60;\n\n  /** @constant {number} */\n  const MAX_AUTH_PER_PERIOD = 10;\n\n  /** @constant {number} */\n  const TOKEN_LIFETIME = 60 * 60 * 1000;\n\n  /** @private */\n  var credentials = {};\n\n  /**\n   * AppNexus Client API class.\n   *\n   * @class Client\n   * @extends Transport\n   */\n  class Client extends _Transport {\n\n    /**\n     * Client constructor.\n     *\n     * @constructs Client\n     * @params {string} [apiBase=https://api.appnexus.com] - default api domain\n     * @params {string} [proxy=null] - proxy url\n     * @params {object} [limits={}] - rate limits\n     */\n    constructor(apiBase = 'https://api.appnexus.com',\n                proxy = null,\n                limits = {\n                  write: MAX_WRITE_PER_PERIOD,\n                  read: MAX_READ_PER_PERIOD,\n                  auth: MAX_AUTH_PER_PERIOD\n                }) {\n      super();\n      this.options = {apiBase, limits, proxy};\n\n      /* Set limiters */\n      this.writeLimiter = new _limiter.RateLimiter(limits.write, MAX_WRITE_PERIOD);\n      this.readLimiter = new _limiter.RateLimiter(limits.read, MAX_READ_PERIOD);\n      this.authLimiter = new _limiter.RateLimiter(limits.auth, MAX_AUTH_PERIOD);\n    }\n\n    /**\n     * Authorize client function\n     *\n     * @method authorize\n     * @params {string} username - Username\n     * @params {string} password - Password\n     * @returns {Promise<String, Error>} AppNexus Access Token\n     */\n    authorize(username, password) {\n\n      if (!username || !password) {\n        throw new Error('Authorization credentials are missing!');\n      }\n\n      credentials =  {username, password};\n\n      if (this.options.token) {\n        delete this.options.token;\n      }\n\n      return this.post(Endpoints.AUTHENTICATION_SERVICE, {auth: credentials})\n          .then((response) => {\n            this.options.token = {value: response.token, _ts: +new Date()};\n            return response.token;\n          });\n    }\n\n    /**\n     * Refresh token\n     **\n     * @method refreshToken\n     * @returns {Promise<String, Error>} AppNexus Access Token\n     */\n    refreshToken() {\n      if (!credentials.username || !credentials.password) {\n        throw new Error('Authorization credentials are missing!');\n      }\n\n      return this.authorize(credentials.username, credentials.password);\n    }\n\n    /**\n     * Checks if request token is not expired\n     **\n     * @isExpired rateLimiter\n     * @returns {boolean} token expired\n     */\n    isExpired(ts = 0) {\n      var timestamp = this.options.token &&\n                      this.options.token._ts ?\n                      this.options.token._ts : ts;\n\n      return timestamp + TOKEN_LIFETIME <= +new Date();\n    }\n\n    /**\n     * Rate limit a request according to specs\n     **\n     * @method rateLimiter\n     * @see {@link uri} for possible endpoints.\n     * @params {string} method - Request method\n     * @params {string} endpoint - api endpoint\n     * @returns {Promise<Number, Error>} Number of request left\n     */\n    rateLimiter(method, endpoint) {\n\n      return new bluebird.Promise((resolve, reject) => {\n        var limiter = null;\n\n        if (endpoint === Endpoints.AUTHENTICATION_SERVICE) {\n          limiter = this.authLimiter;\n        } else if (method === 'POST' || method === 'PUT' || method === 'DELETE') {\n          limiter = this.writeLimiter;\n        } else if (method === 'GET') {\n          limiter = this.readLimiter;\n        } else {\n          return resolve();\n        }\n\n        limiter.removeTokens(1, (err, remainingRequests) => {\n          if (err) {\n            return reject(err);\n          }\n\n          resolve(remainingRequests);\n        });\n      });\n    }\n\n    /**\n     * Request client function\n     *\n     * Adds rate limit and ensures refresh token is valid\n     *\n     * @method request\n     * @extends Transport.request\n     * @private\n     * @see {@link uri} for possible endpoints.\n     * @params {string} method - Request method\n     * @params {string} endpoint - api endpoint\n     * @params {object} [args={}] - arguments\n     * @returns {Promise<Object, Error>} Response body\n     */\n    request(...args) {\n      var [method, endpoint] = args;\n\n      return this.rateLimiter(method, endpoint)\n          .then(() => {\n            // check if token is still valid\n            if (endpoint !== Endpoints.AUTHENTICATION_SERVICE &&\n                             this.isExpired()) {\n\n              return this.refreshToken()\n                  .then(super.request(...args));\n            }\n\n            return super.request(...args);\n          });\n    }\n  }\n\n  var _Client = Client;\n\n  exports.Client = _Client;\n\n  /**\n   * Created by Luke on 01/05/15.\n   */\n\n}));\n"],"sourceRoot":"/source/"}